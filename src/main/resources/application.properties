spring.application.name=PelisApp

# --- Configuraci?n de DataSource (MySQL) - ajustar seg?n tu entorno ---
spring.datasource.url=jdbc:mysql://${SPRING_DATASOURCE_HOST:localhost}:${SPRING_DATASOURCE_PORT:3306}/${SPRING_DATASOURCE_DB:pelisapp}?useSSL=false&serverTimezone=UTC
spring.datasource.username=${SPRING_DATASOURCE_USERNAME:root}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD:Iirne322*}
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA / Hibernate
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect

# JWT settings (no hard-codear el secreto)
# Use APP_JWT_SECRET env var in production. Default provided for local development (>=32 chars for HS256).
app.jwt.secret=${APP_JWT_SECRET:changeit_0123456789_changeit_0123456789}
app.jwt.access-expiration-ms=${APP_JWT_ACCESS_EXPIRATION_MS:86400000}
app.jwt.refresh-expiration-ms=${APP_JWT_REFRESH_EXPIRATION_MS:604800000}

# Backwards-compatible aliases (optional)
app.jwt.expiration-ms=${app.jwt.access-expiration-ms}
app.jwt.refresh-ttl-sec=${app.jwt.refresh-expiration-ms}

# TMDB API Configuration
app.tmdb.base-url=https://api.themoviedb.org/3
# ? PARA REPARTO REAL: Reemplaza "YOUR_API_KEY_HERE" con tu clave real de TMDB
# ? Instrucciones: Ve a http://localhost:8080/tmdb/setup
# ? Conseguir token: https://www.themoviedb.org/settings/api
app.tmdb.api-key=${TMDB_API_KEY:b6193e852fa50a4add2eb01ddfba8043}
app.tmdb.bearer-token=${TMDB_BEARER_TOKEN:}
app.tmdb.image-base-url=https://image.tmdb.org/t/p

# Im?genes descargadas (por defecto en ./data/images y servidas en /images/**)
app.images.storage-path=./data/images
app.images.serve-base=/images

# AI Moderation Configuration
app.moderation.enabled=true
app.moderation.api.url=http://localhost:5000
app.moderation.toxicity.threshold=0.7
app.moderation.review.threshold=0.5
app.moderation.fallback.enabled=true

# Spring Cache Configuration
spring.cache.type=caffeine
spring.cache.caffeine.spec=maximumSize=1000,expireAfterWrite=30m

# Async Configuration
spring.task.execution.pool.core-size=4
spring.task.execution.pool.max-size=8
spring.task.execution.pool.queue-capacity=100

server.port=8080

# Modo desarrollo
app.dev-mode=true

# Configuración de base URL para emails
app.base-url=http://localhost:8080

# Configuración de Email
# Deshabilitado temporalmente - Para habilitar, configurar variables de entorno primero
app.email.enabled=false

# === CONFIGURACIÓN PARA GMAIL ===
# 1. Ve a https://myaccount.google.com/security
# 2. Activa la verificación en 2 pasos
# 3. Genera una "Contraseña de aplicación" específica para esta app
# 4. Usa esa contraseña de aplicación (16 caracteres) en EMAIL_PASSWORD

# OPCIÓN A: Gmail (Recomendado)
spring.mail.host=smtp.gmail.com
spring.mail.port=587
spring.mail.username=${EMAIL_USERNAME:javierbarcelo2106@gmail.com}
spring.mail.password=${EMAIL_PASSWORD:Iirlmnye322*}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true

# OPCIÓN B: Outlook/Hotmail (Alternativa)
# spring.mail.host=smtp-mail.outlook.com
# spring.mail.port=587
# spring.mail.username=${EMAIL_USERNAME:tu-email@outlook.com}
# spring.mail.password=${EMAIL_PASSWORD:tu-contraseña}

# Configuración general de email
spring.mail.from=${EMAIL_FROM:${spring.mail.username}}
spring.mail.default-encoding=UTF-8
spring.mail.test-connection=false

# === INSTRUCCIONES DE USO ===
# Para enviar emails reales:
# 1. Cambia: app.email.enabled=true
# 2. Configura variables de entorno:
#    - EMAIL_USERNAME=tu-email@gmail.com
#    - EMAIL_PASSWORD=tu-contraseña-de-aplicacion-de-16-caracteres
#    - EMAIL_FROM=noreply@pelisapp.com (opcional)
# 3. Reinicia la aplicación
#
# Para volver al modo simulado:
# 1. Cambia: app.email.enabled=false

