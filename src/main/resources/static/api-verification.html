<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Verificaci√≥n de APIs - PelisApp</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .test { margin: 15px 0; padding: 15px; border: 1px solid #ddd; border-radius: 5px; }
        .pending { background-color: #fff3cd; border-color: #ffeaa7; }
        pre { background: #f8f9fa; padding: 10px; border-radius: 3px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>üîß Verificaci√≥n de APIs - PelisApp</h1>

    <div id="health-test" class="test pending">
        <h3>1. System Health Check</h3>
        <p>Estado: <span id="health-status">Verificando...</span></p>
        <pre id="health-result"></pre>
    </div>

    <div id="moderation-test" class="test pending">
        <h3>2. Moderation API Test</h3>
        <p>Estado: <span id="moderation-status">Verificando...</span></p>
        <pre id="moderation-result"></pre>
    </div>

    <div id="movies-test" class="test pending">
        <h3>3. Movies API Test</h3>
        <p>Estado: <span id="movies-status">Verificando...</span></p>
        <pre id="movies-result"></pre>
    </div>

    <script>
        // Test System Health
        fetch('/api/system-health')
            .then(response => response.json())
            .then(data => {
                document.getElementById('health-status').textContent = 'SUCCESS ‚úÖ';
                document.getElementById('health-result').textContent = JSON.stringify(data, null, 2);
                document.getElementById('health-test').className = 'test success';
            })
            .catch(error => {
                document.getElementById('health-status').textContent = 'ERROR ‚ùå';
                document.getElementById('health-result').textContent = 'Error: ' + error.message;
                document.getElementById('health-test').className = 'test error';
            });

        // Test Moderation
        fetch('/api/test-moderation', {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify({ text: 'Esta pel√≠cula es incre√≠ble' })
        })
            .then(response => response.json())
            .then(data => {
                document.getElementById('moderation-status').textContent = 'SUCCESS ‚úÖ';
                document.getElementById('moderation-result').textContent = JSON.stringify(data, null, 2);
                document.getElementById('moderation-test').className = 'test success';
            })
            .catch(error => {
                document.getElementById('moderation-status').textContent = 'ERROR ‚ùå';
                document.getElementById('moderation-result').textContent = 'Error: ' + error.message;
                document.getElementById('moderation-test').className = 'test error';
            });

        // Test Movies API
        fetch('/api/movies')
            .then(response => response.json())
            .then(data => {
                document.getElementById('movies-status').textContent = 'SUCCESS ‚úÖ';
                document.getElementById('movies-result').textContent = `Found ${data.length} movies. First movie: ${JSON.stringify(data[0], null, 2)}`;
                document.getElementById('movies-test').className = 'test success';
            })
            .catch(error => {
                document.getElementById('movies-status').textContent = 'ERROR ‚ùå';
                document.getElementById('movies-result').textContent = 'Error: ' + error.message;
                document.getElementById('movies-test').className = 'test error';
            });
    </script>
</body>
</html>
